<div class="row justify-content-center" *ngIf="!isLoading && !unexpectedError">
    <div class="col-lg-8" *ngIf="!isRegister">
        <form [formGroup]="logInForm" (submit)="onLogInSubmit()">
            <div class="d-flex justify-content-between">
                <h3>Log in</h3>
                <button class="auth_changeForm_btn" type="button" (click)="changeForm()">Sign Up <i class="bi bi-caret-down"></i></button>
            </div>
            <hr>
            <div class="mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-person-fill" style="font-size: 24px;"></i></span>
                    <input type="text" class="form-control" formControlName="userIdentifier" placeholder="Username, email or phone" [class.is-invalid]="logInForm.controls['userIdentifier'].dirty && logInForm.hasError('required','userIdentifier')">
                </div>
                <span *ngIf="logInForm.controls['userIdentifier'].dirty && logInForm.hasError('required','userIdentifier')" class="text-danger bold mb-4">Field is required</span>
            </div>
            <div class="mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-lock-fill" style="font-size: 24px;"></i></span>
                    <input type="text" class="form-control" formControlName="password" placeholder="Password" [class.is-invalid]="logInForm.controls['password'].dirty && logInForm.hasError('required','password')">
                </div>
                <span *ngIf="logInForm.controls['password'].dirty && logInForm.hasError('required','password')" class="text-danger bold mb-4">Field is required</span>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="flexCheckDefault" formControlName="keepAuthorized">
                <label class="form-check-label" for="flexCheckDefault">Keep user authorized</label>
            </div>
            <div class="text-center">
                <button *ngIf="logInForm?.valid" class="btn btn-primary btn-lg" type="submit">Log In</button>
            </div>
        </form>
    </div>
    <div class="col-lg-8" *ngIf="isRegister">
        <form [formGroup]="signUpForm" (submit)="onSignUpSubmit()">
            <div class="d-flex justify-content-between">
                <h3>Sign up</h3>
                <button class="auth_changeForm_btn" type="button" (click)="changeForm()">Sign Up <i class="bi bi-caret-down"></i></button>
            </div>
            <hr>
            <div class="mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-person" style="font-size: 24px;"></i></span>
                    <input type="text" class="form-control" formControlName="fullName" placeholder="Fullname" [class.is-invalid]="signUpForm.controls['fullName'].dirty && signUpForm.hasError('required','fullName')">
                </div>
                <span *ngIf="signUpForm.controls['fullName'].dirty && signUpForm.hasError('required','fullName')" class="text-danger bold mb-4">Field is required</span>
            </div>
            <div class="mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-person-fill" style="font-size: 24px;"></i></span>
                    <input type="text" class="form-control" formControlName="username" placeholder="Username" [class.is-invalid]="signUpForm.controls['username'].dirty && signUpForm.hasError('required','username')">
                </div>
                <span *ngIf="signUpForm.controls['username'].dirty && signUpForm.hasError('required','username')" class="text-danger bold mb-4">Field is required</span>
            </div>
            <div class="mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-envelope" style="font-size: 24px;"></i></span>
                    <input type="email" class="form-control" formControlName="email" placeholder="Email" [class.is-invalid]="signUpForm.controls['email'].dirty && signUpForm.hasError('required','email')">
                </div>
                <span *ngIf="signUpForm.controls['email'].dirty && signUpForm.hasError('required','email')" class="text-danger bold mb-4">Field is required</span>
            </div>
            <div class="mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-telephone" style="font-size: 24px;"></i></span>
                    <input type="text" class="form-control" formControlName="mobilePhone" placeholder="Mobile phone" [class.is-invalid]="signUpForm.controls['mobilePhone'].dirty && signUpForm.hasError('required','mobilePhone')">
                </div>
                <span *ngIf="signUpForm.controls['mobilePhone'].dirty && signUpForm.hasError('required','mobilePhone')" class="text-danger bold mb-4">Field is required</span>
            </div>
            <div class="mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-lock" style="font-size: 24px;"></i></span>
                    <input type="text" class="form-control" formControlName="password" placeholder="Password" [class.is-invalid]="signUpForm.controls['password'].dirty && signUpForm.hasError('password')">
                </div>
                <span *ngIf="signUpForm.controls['password'].dirty && signUpForm.hasError('required','password')" class="text-danger bold mb-4">Field is required</span>
            </div>
            <div class="mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-lock-fill" style="font-size: 24px;"></i></span>
                    <input type="text" class="form-control" formControlName="passwordConfirm" placeholder="Confirm password" [class.is-invalid]="signUpForm.controls['passwordConfirm'].dirty && signUpForm.hasError('required','passwordConfirm')">
                </div>
                <span *ngIf="signUpForm.controls['passwordConfirm'].dirty && signUpForm.hasError('required','passwordConfirm')" class="text-danger bold mb-4">Field is required</span>
            </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="flexCheckDefault" formControlName="keepAuthorized">
                    <label class="form-check-label" for="flexCheckDefault">Keep user authorized</label>
                </div>
                <div class="text-center">
                    <button *ngIf="signUpForm?.valid" class="btn btn-primary btn-lg" type="submit">Sign Up</button>
                </div>
        </form>
    </div>
</div>

<app-loading-state *ngIf="isLoading"></app-loading-state>
<app-error *ngIf="unexpectedError" [error]="unexpectedError"></app-error>
<app-error-modal *ngIf="errorModalContent" [content]="errorModalContent" (errorModalClosed)="closeErrorModal()"></app-error-modal>
